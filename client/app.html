<template name="plans">
	<header>
	  <h1>My plans</h1>
		<form class="new-plan">
		<input type="text" name="planName" placeholder="Add new plan" />
	  </form>
	</header>

	<ul>
	  {{#each myPlan}}
	    {{> planLines}}
	  {{/each}}
	</ul>

    <h1>Other plans</h1>
	<ul>
	  {{#each otherPlan}}
	    {{> planLines}}
	  {{/each}}
	</ul>
</template>

<template name="planLines">
  <li>
  	{{#if editPlanId}}
  		<form class="editPlan">
  			<input type="text" name="editPlanName" value="{{name}}" />
  			<button class="save" type="submit">Save</button>
  			<button class="cancel">Cancel</button>
  		</form>
  	{{else}}
  		<a href="/plans/{{_id}}">{{name}}</a>
  		{{#if isAuthor}}
  		  <button class="edit">Edit</button>
 		  <button class="delete">&times;</button>
 		{{/if}}
 	{{/if}}
  </li>
</template>

<template name="plan">
  {{#if plan}}
  <header>
	  {{#with plan}}
	    <h1>{{name}}</h1>
	  {{/with}}
  </header>

	<ul>
	  {{#each plan.tasks}}
	    {{> taskLines}}
	  {{/each}}
	  {{#if isAuthor}}
		  <li>
		  	<form class="new-task">
		  	  <input type="text" name="taskText" placeholder="Add new task" />
		  	</form>
		  </li>
	  {{/if}}
	</ul>
  {{else}}
    <form class="get-token">
	    <input type="text" name="secretToken" placeholder="Access token" />
	    <button type="submit">Send</button>
	</form>
  {{/if}}
</template>

<template name="taskLines">
  <li>
  	{{#if editTaskId}}
  		<form class="editTask">
  			<input name="editTaskText" value="{{text}}">
  			<button class="save" type="submit">Save</button>
  			<button class="cancel">Cancel</button>
  		</form>
  	{{else}}
  		<a href="#" class="toggle-status">{{status}}</a> - {{text}}
  		{{#if isAuthor}}
  		  <button class="edit">Edit</button>
  		  <button class="delete">&times;</button>
  		{{/if}}
  	{{/if}}
  </li>
</template>

<template name="activity">
	<header>
	  <h1>Latest Activity</h1>
	</header>

	<ul>
	  {{#each plans}}
	    {{> planLines}}
	  {{/each}}
	</ul>
</template>
