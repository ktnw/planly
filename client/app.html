<template name="plans">
	<header>
	  <h1>My plans</h1>
		<form class="new-plan">
		<input type="text" name="planName" placeholder="Add new plan" />
	  </form>
	</header>

	<ul>
	  {{#each myPlan}}
	    {{> planLines}}
	  {{/each}}
	</ul>

    <h1>Other plans</h1>
	<ul>
	  {{#each otherPlan}}
	    {{> planLines}}
	  {{/each}}
	</ul>
</template>

<template name="planLines">
	<div class="well well-sm">
		<div class="row">
		  	<div class="col-xs-9 col-sm-10 col-md-11">
		  		{{#if editPlanId}}
			  		<form class="editPlan">
			  			<input type="text" name="editPlanName" value="{{name}}" />
			  			<button class="save" type="submit">Save</button>
			  			<button class="cancel">Cancel</button>
			  		</form>
				{{else}}
					<a href="/plans/{{_id}}" class="card-title">{{name}}</a>
					<p class="card-text">{{updateTime}}</p>
				{{/if}}
			</div>
			<div class="col-xs-3 col-sm-2 col-md-1">
				{{#if isAuthor}}
			    	<div class="plan-controls">
			        	<a href="#" class="edit">
							<span class="glyphicon glyphicon-edit"></span>
						</a>
						<a href="#" class="delete">
							<span class="glyphicon glyphicon-trash"></span>
						</a>
					</div>
				{{/if}}
			</div>
		</div>
	</div>
</template>

<template name="plan">
  {{#if plan}}
  <header>
	  {{#with plan}}
	    <h1>{{name}}</h1>
	  {{/with}}
  </header>

	<ul>
	  {{#each plan.tasks}}
	    {{> taskLines}}
	  {{/each}}
	  {{#if isAuthor}}
		  <li class="task-line">
		  	<form class="new-task">
		  	  <input type="text" name="taskText" placeholder="Add new task" />
		  	</form>
		  </li>
	  {{/if}}
	</ul>
  {{else}}
    <form class="get-token">
	    <input type="text" name="secretToken" placeholder="Access token" />
	    <button type="submit">Send</button>
	</form>
  {{/if}}
</template>

<template name="taskLines">
  <li class="task-line">
  	{{#if editTaskId}}
  		<form class="editTask">
  			<input name="editTaskText" value="{{text}}">
  			<button class="save" type="submit">Save</button>
  			<button class="cancel">Cancel</button>
  		</form>
  	{{else}}
  		<a href="#" class="toggle-status">{{status}}</a> - {{text}}
  		{{#if isAuthor}}
  		  <a href="#" class="edit">
  		  	<span class="glyphicon glyphicon-edit"></span>
  		  </a>

  		  <a href="#" class="delete">
  		  	<span class="glyphicon glyphicon-trash"></span>
  		  </a>
  		{{/if}}
  	{{/if}}
  </li>
</template>

<template name="activity">
	<header>
	  <h1>Latest Activity</h1>
	</header>

	{{#each plans}}
		{{> planLines}}
	{{/each}}
</template>
